<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ø¹Ø§Ù„Ù… Ø§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª</title>
<style>
body{margin:0;font-family:Tahoma,Arial;background:#0f172a;color:#fff;padding:16px}
.card{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);
border-radius:18px;padding:14px;margin:12px 0}
button{width:100%;padding:14px;border:0;border-radius:14px;background:#2563eb;color:#fff;font-size:16px;margin-top:8px}
button:active{transform:scale(.98)}
.story{white-space:pre-wrap;line-height:1.8;font-size:17px}
.small{font-size:12px;color:#b7c3e6}
.score{margin-top:8px;font-size:14px;color:#38bdf8}
</style>
</head>
<body>

<h2>ğŸ­ Ø¹Ø§Ù„Ù… Ø§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª</h2>
<div class="small">Ø§Ø®ØªØ± Ø£Ùˆ Ù‚Ù„ Ù‚Ø±Ø§Ø±Ùƒ Ø¨ØµÙˆØªÙƒ. Ø§Ù„Ù‚ØµØ© ØªØªØºÙŠØ± Ø­Ø³Ø¨ Ø§Ø®ØªÙŠØ§Ø±Ø§ØªÙƒ.</div>

<div class="card">
<div id="story" class="story">Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©"</div>
<div class="score" id="points"></div>
</div>

<div class="card">
<button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© ğŸš€</button>
<button onclick="listen()">Ø¬Ø§ÙˆØ¨ Ø¨ØµÙˆØªÙƒ ğŸ¤</button>
<div id="status" class="small"></div>
</div>

<script>

let step = 0;
let courage = 0;
let intelligence = 0;
let kindness = 0;

const worlds = [
"ÙÙŠ Ù…Ø¯ÙŠÙ†Ø© Ù…Ø¹Ù„Ù‘Ù‚Ø© ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡...",
"ÙÙŠ Ø£Ø¹Ù…Ø§Ù‚ Ø¨Ø­Ø± ØºØ§Ù…Ø¶...",
"ÙÙŠ ØµØ­Ø±Ø§Ø¡ ÙˆØ§Ø³Ø¹Ø© Ù…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„Ø£Ø³Ø±Ø§Ø±...",
"Ø¯Ø§Ø®Ù„ Ù‚Ù„Ø¹Ø© Ù‚Ø¯ÙŠÙ…Ø© Ù…Ù‡Ø¬ÙˆØ±Ø©..."
];

const problems = [
"Ø¸Ù‡Ø± Ø¸Ù„ ØºØ§Ù…Ø¶ ÙŠØ­Ù…Ù„ Ø®Ø±ÙŠØ·Ø© Ø³Ø±ÙŠØ©.",
"ÙˆØ¬Ø¯Øª Ø¨Ø§Ø¨Ù‹Ø§ Ø°Ù‡Ø¨ÙŠÙ‹Ø§ Ù…ØºÙ„Ù‚Ù‹Ø§.",
"Ø³Ù…Ø¹Øª ØµÙˆØª Ø§Ø³ØªØºØ§Ø«Ø© Ø¨Ø¹ÙŠØ¯.",
"Ø¸Ù‡Ø± Ù…Ø®Ù„ÙˆÙ‚ ØµØºÙŠØ± ÙŠØ¨ÙƒÙŠ."
];

const endings = [
"Ø£ØµØ¨Ø­Øª Ø¨Ø·Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©!",
"Ø§ÙƒØªØ´ÙØª Ø³Ø±Ù‹Ø§ Ù„Ù… ÙŠØ¹Ø±ÙÙ‡ Ø£Ø­Ø¯ Ù‚Ø¨Ù„Ùƒ.",
"Ø£Ù†Ù‚Ø°Øª Ø§Ù„Ù…ÙƒØ§Ù† ÙˆØ£ØµØ¨Ø­Øª Ù…Ø´Ù‡ÙˆØ±Ù‹Ø§.",
"ØªØ¹Ù„Ù…Øª Ø¯Ø±Ø³Ù‹Ø§ Ù„Ù† ØªÙ†Ø³Ø§Ù‡ Ø£Ø¨Ø¯Ù‹Ø§."
];

function speak(text){
speechSynthesis.cancel();
let u = new SpeechSynthesisUtterance(text);
u.lang="ar-SA";
u.rate=0.9;
speechSynthesis.speak(u);
}

function startGame(){
step=1;
courage=0;
intelligence=0;
kindness=0;

let intro = worlds[Math.floor(Math.random()*worlds.length)]
+ "\n\n"
+ problems[Math.floor(Math.random()*problems.length)]
+ "\n\n"
+ "Ù‡Ù„ ØªÙ‚ØªØ±Ø¨ Ø£Ù… ØªÙ‡Ø±Ø¨ Ø£Ù… ØªØ¨Ø­Ø« Ø¹Ù† Ø­Ù„ØŸ";

document.getElementById("story").innerText=intro;
updatePoints();
speak(intro);
}

function nextStep(choice){
if(step===1){
if(choice==="ØªÙ‚ØªØ±Ø¨"){courage+=2;}
if(choice==="ØªÙ‡Ø±Ø¨"){courage-=1;}
if(choice==="ØªØ¨Ø­Ø«"){intelligence+=2;}

let text="Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø·Ø±ÙŠÙ‚... ÙØ¬Ø£Ø© Ø¸Ù‡Ø± Ù„ØºØ² ÙŠØ­ØªØ§Ø¬ Ø­Ù„Ù‹Ø§!\n"
+ "Ù‡Ù„ ØªØ­Ø§ÙˆÙ„ Ø­Ù„Ù‡ Ø£Ù… ØªØ·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©ØŸ";

document.getElementById("story").innerText=text;
speak(text);
step=2;
updatePoints();
return;
}

if(step===2){
if(choice==="ØªØ­Ø§ÙˆÙ„"){intelligence+=2;}
if(choice==="ØªØ·Ù„Ø¨"){kindness+=2;}

let text="Ù†Ø¬Ø­Øª ÙÙŠ Ø§Ù„ØªÙ‚Ø¯Ù… Ø£ÙƒØ«Ø±...\n"
+ "Ø¸Ù‡Ø± Ù…Ø®Ù„ÙˆÙ‚ ØµØºÙŠØ± ÙŠØ­ØªØ§Ø¬ Ù…Ø³Ø§Ø¹Ø¯Ø©.\n"
+ "Ù‡Ù„ ØªØ³Ø§Ø¹Ø¯Ù‡ Ø£Ù… ØªØªØ¬Ø§Ù‡Ù„Ù‡ØŸ";

document.getElementById("story").innerText=text;
speak(text);
step=3;
updatePoints();
return;
}

if(step===3){
if(choice==="ØªØ³Ø§Ø¹Ø¯"){kindness+=3;}
if(choice==="ØªØªØ¬Ø§Ù‡Ù„"){courage+=1;}

let text="Ø§Ù‚ØªØ±Ø¨Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©...\n"
+ endings[Math.floor(Math.random()*endings.length)];

document.getElementById("story").innerText=text;
speak(text);
updatePoints();
step=4;
return;
}
}

function listen(){
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
if(!SpeechRecognition){
document.getElementById("status").innerText="Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø§ÙŠÙƒ. Ø§Ø³ØªØ®Ø¯Ù… Chrome.";
return;
}

const rec = new SpeechRecognition();
rec.lang="ar-SA";
rec.start();

document.getElementById("status").innerText="ğŸ§ Ø£Ø³Ù…Ø¹Ùƒ...";

rec.onresult=function(e){
let said=e.results[0][0].transcript.trim();
document.getElementById("status").innerText="Ø³Ù…Ø¹Øª: "+said;

if(said.includes("Ø§Ù‚ØªØ±Ø¨")||said.includes("ØªÙ‚ØªØ±Ø¨")) nextStep("ØªÙ‚ØªØ±Ø¨");
else if(said.includes("Ø§Ù‡Ø±Ø¨")||said.includes("ØªÙ‡Ø±Ø¨")) nextStep("ØªÙ‡Ø±Ø¨");
else if(said.includes("Ø§Ø¨Ø­Ø«")||said.includes("ØªØ¨Ø­Ø«")) nextStep("ØªØ¨Ø­Ø«");
else if(said.includes("Ø§Ø­Ø§ÙˆÙ„")||said.includes("ØªØ­Ø§ÙˆÙ„")) nextStep("ØªØ­Ø§ÙˆÙ„");
else if(said.includes("Ù…Ø³Ø§Ø¹Ø¯Ø©")||said.includes("Ø§Ø·Ù„Ø¨")) nextStep("ØªØ·Ù„Ø¨");
else if(said.includes("Ø³Ø§Ø¹Ø¯")||said.includes("ØªØ³Ø§Ø¹Ø¯")) nextStep("ØªØ³Ø§Ø¹Ø¯");
else if(said.includes("ØªØ¬Ø§Ù‡Ù„")) nextStep("ØªØªØ¬Ø§Ù‡Ù„");
else document.getElementById("status").innerText="Ù„Ù… Ø£ÙÙ‡Ù… Ø§Ù„Ù‚Ø±Ø§Ø±.";
};
}

function updatePoints(){
document.getElementById("points").innerText=
"ğŸ¦ Ø§Ù„Ø´Ø¬Ø§Ø¹Ø©: "+courage+
" | ğŸ§  Ø§Ù„Ø°ÙƒØ§Ø¡: "+intelligence+
" | â¤ï¸ Ø§Ù„ØªØ¹Ø§Ø·Ù: "+kindness;
}

</script>

</body>
</html>
